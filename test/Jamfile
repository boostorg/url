#
# Copyright (c) 2019 Vinnie Falco (vinnie.falco@gmail.com)
#
# Distributed under the Boost Software License, Version 1.0. (See accompanying
# file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
#
# Official repository: https://github.com/vinniefalco/url
#

project
  : default-build

    <warnings>extra

  : requirements

    <toolset>msvc:<warnings-as-errors>on
    <toolset>gcc:<warnings-as-errors>on
    <toolset>clang:<warnings-as-errors>on
    # Extra errors that are disabled by default
    <toolset>msvc:<cxxflags>"/we4265"
    # Warnings in dependencies
    <toolset>gcc:<cxxflags>"-Wno-unused-but-set-variable"
    <toolset>gcc-7:<cxxflags>"-Wno-maybe-uninitialized"
    <toolset>gcc-8:<cxxflags>"-Wno-maybe-uninitialized"
    <toolset>gcc-9:<cxxflags>"-Wno-maybe-uninitialized"
    <toolset>gcc-10:<cxxflags>"-Wno-maybe-uninitialized"
    <toolset>gcc-11:<cxxflags>"-Wno-maybe-uninitialized"
    <toolset>gcc-12:<cxxflags>"-Wno-maybe-uninitialized"
    <toolset>gcc-13:<cxxflags>"-Wno-maybe-uninitialized"
    <toolset>clang-4:<cxxflags>"-Wno-unused-but-set-variable"
    <toolset>clang-5:<cxxflags>"-Wno-unused-but-set-variable"
    <toolset>clang-6:<cxxflags>"-Wno-unused-but-set-variable"
    <toolset>clang-13:<cxxflags>"-Wno-unused-but-set-variable"
    <toolset>clang-14:<cxxflags>"-Wno-unused-but-set-variable"
    <toolset>clang-15:<cxxflags>"-Wno-unused-but-set-variable"
    <toolset>gcc,<target-os>windows:<cxxflags>"-Wno-error=array-bounds"
    # different typeinfos confuse ubsan
    <undefined-sanitizer>norecover:<link>static
    <undefined-sanitizer>norecover:<visibility>global
    ;

project
  : default-build

    <warnings>extra

  : requirements

    <toolset>msvc:<warnings-as-errors>on
    <toolset>gcc:<warnings-as-errors>on
    <toolset>clang:<warnings-as-errors>on
    <toolset>gcc:<cxxflags>"-Wno-unused-but-set-variable"      # Warnings in dependencies
    <toolset>clang:<cxxflags>"-Wno-unknown-warning-option"
    <toolset>clang-13:<cxxflags>"-Wno-unused-but-set-variable" # Warnings in dependencies
    <toolset>clang-14:<cxxflags>"-Wno-unused-but-set-variable" # Warnings in dependencies
    <toolset>clang-15:<cxxflags>"-Wno-unused-but-set-variable" # Warnings in dependencies

  ;

build-project extra ;
build-project limits ;
build-project unit ;

